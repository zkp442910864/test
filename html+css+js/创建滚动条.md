
创建滚动条

1. 隐藏原滚动条，利用 父div 包裹，子div 超出宽度 来进行隐藏

2. 可视高度 / 内容高度 = 内容比例
    内容比例 * 100 = 滑动块高度%
    内容比例 * 可视高度 = 滑动块高度
        可视高度 * 滑动块高度%

3. 滚动轴上， 滚动距离换算
    距离 / 内容比例 = 内容滚动距离

```
<template>
  <div class="box">
    <div class="content" ref="content">
      <hr />
      <div v-for="val in 50" :key="val">{{ val }}</div>
      <hr />
    </div>
    <div class="scroll-bar-box">
      <div class="scroll-bar" ref="bar" @click="barClick">
        <div
          class="scroll-chunk"
          ref="chunk"
          @click.stop
          :style="chunkStyle"
        ></div>
      </div>
    </div>
  </div>
</template>

<script >
import { defineComponent, ref, onMounted, reactive } from "vue";
export default defineComponent({
  setup() {
    const content = ref(null);
    const chunk = ref(null);
    const bar = ref(null);
    const chunkStyle = reactive({});
    const config = {};

    // 处理滚轮 滚动
    const handleScroll = () => {
      content.value.addEventListener("scroll", (event) => {
        // console.log(event.target.scrollTop);
        window.requestAnimationFrame(() => {
          const top = event.target.scrollTop;
          chunkStyle.top = `${(top / config.scrollHeight) * 100}%`;
        });
      });
    };

    // 处理滑动块 滚动
    const handleTargetChunk = () => {
      const flagObj = {
        clientY: 0,
        scrollTop: 0,
      };

      const move = (event) => {
        // 滑动的距离， 把这块距离，根据比例换算成内容高度
        const py = event.clientY - flagObj.clientY;
        content.value.scrollTop = flagObj.scrollTop + py / config.chunkRatio;
        // console.log(py / config.chunkRatio)
      };

      const up = (event) => {
        document.removeEventListener("mousemove", move, false);
        document.removeEventListener("mouseup", up, false);
      };

      const down = (event) => {
        // console.log(event);
        flagObj.clientY = event.clientY;
        flagObj.scrollTop = content.value.scrollTop;

        document.addEventListener("mousemove", move, false);
        document.addEventListener("mouseup", up, false);
      };

      chunk.value.addEventListener("mousedown", down, false);
    };

    // 滑动轨迹 点击事件
    const barClick = (event) => {
      // console.log(event.clientY);
      content.value.scrollTop =
        (event.clientY - config.chunkRawHeight / 2) / config.chunkRatio;
    };

    // 滚轮事件,可能要多端兼容
    const wheel = (event) => {
      // console.log(event.deltaY);
      content.value.scrollTop =
        content.value.scrollTop + event.deltaY / config.chunkRatio;
    };

    onMounted(() => {
      const offsetHeight = (config.offsetHeight = content.value.offsetHeight);
      const scrollHeight = (config.scrollHeight = content.value.scrollHeight);
      // 可视高度 / 内容高度 = 内容比例 TODO: 后面的计算都是围绕着这个来
      const chunkRatio = (config.chunkRatio = offsetHeight / scrollHeight);
      const chunkHeight = (config.chunkHeight = chunkRatio * 100);
      const chunkRawHeight = (config.chunkRawHeight =
        offsetHeight * chunkRatio);
      console.log(config);

      handleScroll();
      handleTargetChunk();

      chunkStyle.height = chunkHeight + "%";
      // console.log(chunk.value);
    });

    return {
      content,
      chunkStyle,
      chunk,
      bar,
      barClick,
      wheel,
    };
  },
});
</script>

<style>
.box {
  height: 400px;
  position: relative;
  overflow: hidden;
}

.content {
  height: 100%;
  /* scroll-behavior: smooth; */
  /* 这种需要监听滚轮 */
  /* overflow: hidden; */
  /* 这种隐藏滚动条 */
  overflow: auto;
  margin-right: -16px;
  padding-right: 16px;
}

.scroll-bar-box {
  /* display: none; */
  /* opacity: 0; */
  transition: 0.2s;
  overflow: auto;
  position: absolute;
  top: 0;
  right: 20px;
  right: 0;
  bottom: 0;
  width: 20px;
  user-select: none;
}
.scroll-bar {
  height: 100%;
  width: 100%;
  position: relative;
  background: #edf2f7;
}
.scroll-chunk {
  /* height: 100px; */
  /* top: 10%; */
  top: 0;
  position: absolute;
  background: #718096;
  width: 100%;
}

.scroll-chunk:hover {
  background: #61718a;
}

.scroll-chunk:active {
  background: #4f617e;
}

.box:hover .scroll-bar-box {
  /* opacity: 1; */
}
</style>

```

