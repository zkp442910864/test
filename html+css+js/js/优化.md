参考地址
    https://mp.weixin.qq.com/s?__biz=MzUzNjk5MTE1OQ==&mid=2247495738&idx=2&sn=deda9560eae2ab23cb86888d0b7dbf81&chksm=faef74e2cd98fdf437204fcb67ff0ba10d5f1f68b0334106981b24b88609ab3e2abac68dfb51&mpshare=1&scene=23&srcid=0114jwloFm927UdLgKpRHc0W&sharer_sharetime=1610587372093&sharer_shareid=cabd4fd34f35c2dfd2bb0b1c865b37ed#rd


```
// 窗口激活状态监听
let vEvent = 'visibilitychange';
if (document.webkitHidden != undefined) {
    vEvent = 'webkitvisibilitychange';
}

function visibilityChanged() {
    if (document.hidden || document.webkitHidden) {
        document.title = '客官，别走啊~'
        console.log("Web page is hidden.")
    } else {
        document.title = '客官，你又回来了呢~'
        console.log("Web page is visible.")
    }
}

document.addEventListener(vEvent, visibilityChanged, false);
```

```
// 监听网络变化
var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
var type = connection.effectiveType;

function updateConnectionStatus() {
  console.log("Connection type changed from " + type + " to " + connection.effectiveType);
  type = connection.effectiveType;
}

connection.addEventListener('change', updateConnectionStatus);
```

```
// 计算DOMContentLoaded时间
window.addEventListener('DOMContentLoaded', (event) => {
    let timing = performance.getEntriesByType('navigation')[0];
    console.log(timing.domInteractive);
    console.log(timing.fetchStart);
    let diff = timing.domInteractive - timing.fetchStart;
    console.log("TTI: " + diff);
})

// 更多计算规则
    DNS 解析耗时: domainLookupEnd - domainLookupStart
    TCP 连接耗时: connectEnd - connectStart
    SSL 安全连接耗时: connectEnd - secureConnectionStart
    网络请求耗时 (TTFB): responseStart - requestStart
    数据传输耗时: responseEnd - responseStart
    DOM 解析耗时: domInteractive - responseEnd
    资源加载耗时: loadEventStart - domContentLoadedEventEnd
    First Byte时间: responseStart - domainLookupStart
    白屏时间: responseEnd - fetchStart
    首次可交互时间: domInteractive - fetchStart
    DOM Ready 时间: domContentLoadEventEnd - fetchStart
    页面完全加载时间: loadEventStart - fetchStart
    http 头部大小：transferSize - encodedBodySize
    重定向次数：performance.navigation.redirectCount
    重定向耗时: redirectEnd - redirectStart
```

```
```
